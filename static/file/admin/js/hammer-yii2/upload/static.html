<!-- 特殊适应的js   只适合本项目 -->
<div id="add-video-modal" class="fade modal in" role="dialog" tabindex="-1" style="display: block; padding-right: 17px;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">添加视频</h4>
            </div>
            <div class="modal-body">
                <div class="row" id="video">
                    <div class="col-lg-5">
                        <form id="video-form" action="/video/list" method="post">
                            <input type="hidden" name="_csrf-frontend" value="0EvYQob2sskYOKd7hQ1UOnoaovwzlL-550Ocl9V2vSO9fZNy1sfQmn8N5A_8ZwB5Cn_PplqlzYywM_70mATJDg==">
                            <div class="form-group field-kzfileupload-title">
                                <label class="control-label" for="kzfileupload-title">Title</label>
                                <input type="text" id="kzfileupload-title" class="form-control" name="KzFileUpload[title]">
                            </div>
                            <div class="form-group field-kzfileupload-detail">
                                <label class="control-label" for="kzfileupload-detail">Detail</label>
                                <textarea id="kzfileupload-detail" class="form-control" name="KzFileUpload[detail]" rows="6"></textarea>
                            </div>
                            <div class="form-group field-kzfileupload-file_info">
                                <label class="control-label" for="kzfileupload-file_info">File Info</label>
                                <textarea id="kzfileupload-file_info" class="form-control" name="KzFileUpload[file_info]" rows="6"></textarea>
                            </div>
                            <div class="form-group field-kzfileupload-vendor_info">
                                <label class="control-label" for="kzfileupload-vendor_info">Vendor Info</label>
                                <textarea id="kzfileupload-vendor_info" class="form-control" name="KzFileUpload[vendor_info]" rows="6"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="control-label" for="kzfileupload-sign">签名信息</label>
                                <textarea id="kzfileupload-sign" name="KzFileUpload[sign_info]" class="form-control" rows="6"></textarea>
                            </div>

                            <div class="form-group">
                                <label class="sr-only" for="inputfile">文件输入</label>
                                <input type="file" id="inputfile" accept=".mp4,.avi">
                            </div>
                            <div class="form-group">
                                <button type="button" id="video-form-btn" class="btn btn-primary hide">获取签名</button>
                            </div>

                            <div class="form-group">
                                <div class="progress hide">
                                    <div id="uploading_process" class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:0%;">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <button type="button" id="video-upload-btn" class="btn btn-primary hide">上传</button>
                            </div>
                        </form>
                        <script>

                        </script>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>

<script>

    let createInputText = function (label_name, val_name) {
        let input = new Emt('input').setAttrsByStr('type="text" id="kzfileupload-' + val_name + '" class="form-control" name="KzFileUpload[' + val_name + ']"');
        return new Emt('div').setPros({className: 'form-group field-kzfileupload-' + val_name, input_ele: input}).addNodes([
            new Emt('label').setPros({className: 'control-label" for="kzfileupload-' + val_name}).setPros({textContent: label_name}),
            input
        ]);
    };

    let createInputTextArea = function (label_name, val_name) {
        let input = new Emt('textarea').setAttrsByStr('rows="6" id="kzfileupload-' + val_name + '" class="form-control" name="KzFileUpload[' + val_name + ']"');
        return new Emt('div').setPros({className: 'form-group field-kzfileupload-' + val_name, input_ele: input}).addNodes([
            new Emt('label').setPros({className: 'control-label" for="kzfileupload-' + val_name}).setPros({textContent: label_name}),
            input
        ]);
    };


    let div_modal = new Emt('div').setAttrsByStr('class="fade modal in" role="dialog" tabindex="-1" style="display: block; padding-right: 17px;"');
    let h5_modal_title = new Emt('h4').setPros({textContent: '标题'}).setAttrsByStr('class="modal-title"');
    let form_upload = new Emt('form').addNodes([
        new Emt('input').setAttrsByStr('type="hidden" name="_csrf-frontend"').setPros({value: serverData.csrf}),
    ]);


    form_upload.input_map = {};
    [
        {label_name: '标题', val_name: 'title', type: 'text'},
        {label_name: '详情', val_name: 'detail', type: 'textarea'},
        {label_name: '1.文件信息', val_name: 'file_info', type: 'textarea'},
        {label_name: '2.签名信息', val_name: 'sign_info', type: 'textarea'},
        {label_name: '3.cdn信息', val_name: 'vendor_info', type: 'textarea'},

    ].forEach(function (tmp_opt) {
        let form_group = tmp_opt.type === 'text' ? createInputText(tmp_opt.label_name, tmp_opt.val_name) : createInputTextArea(tmp_opt.label_name, tmp_opt.val_name);
        form_upload.input_map[tmp_opt.val_name] = form_group.input_ele;
    });
    let input_file = new Emt('input').setAttrsByStr('type="file" id="inputfile" accept=".mp4,.avi"');
    let process_uploading = new Emt('div').setAttrsByStr('id="uploading_process" class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:0%;"');

    div_modal.addNodes([
        new Emt('div').setAttrsByStr('class="modal-dialog"').addNodes([
            new Emt('div').setAttrsByStr('class="modal-content"').addNodes([
                //头部
                new Emt('div').setAttrsByStr('class="modal-header"').addNodes([
                    new Emt('button').setPros({textContent: 'x'}).setAttrsByStr('type="button" class="close" data-dismiss="modal" aria-hidden="true"'),
                    h5_modal_title
                ]),
                //主体
                new Emt('div').setAttrsByStr('class="modal-body"').addNodes([
                    new Emt('div').setAttrsByStr('class="row"').addNodes([
                        new Emt('div').setAttrsByStr('class="col-lg-5"').addNodes([
                            form_upload.addNodes([
                                new Emt('div').setPros({className: 'form-group'}).addNodes([
                                    new Emt('label').setAttrsByStr('class="sr-only" for="inputfile"', '文件选择'),
                                    input_file
                                ]),
                                new Emt('div').setPros({className: 'form-group'}).addNodes([
                                    new Emt('button').setAttrsByStr('type="button" id="video-form-btn" class="btn btn-primary hide"', '获取签名'),
                                ]),
                                new Emt('div').setPros({className: 'form-group'}).addNodes([
                                    new Emt('div').setPros({className: 'progress hide'}).addNodes([
                                        process_uploading
                                    ])
                                ]),
                                new Emt('div').setPros({className: 'form-group'}).addNodes([
                                    new Emt('label').setAttrsByStr('class="sr-only" for="inputfile"').setPros({textContent: '文件选择'}),
                                    input_file
                                ]),
                                new Emt('div').setPros({className: 'form-group'}).addNodes([
                                    new Emt('button').setAttrsByStr('type="button" id="video-upload-btn" class="btn btn-primary hide"', '上传'),
                                ]),
                            ])
                        ])
                    ])
                ])

            ])
        ])
    ])
</script>